<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Takane</title>
  <link type="text/css" rel="stylesheet" href="css/style.css" />
  <!-- Load required Bootstrap and BootstrapVue CSS -->
  <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
  <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />
  <!-- Load polyfills to support older browsers -->
  <script src="//polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver" crossorigin="anonymous"></script>
  <!-- Load Vue followed by BootstrapVue -->
  <script src="//unpkg.com/vue@latest/dist/vue.min.js"></script>
  <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
</head>
<body>
  <!-- ナビ -->
  <nav class="navbar navbar-dark" style="background-color: #a6126a;">
    <a class="navbar-brand" href="#">Takane</a>
  </nav>
  <!-- メイン -->
  <div id="app" class="container">
    <div id="search">
      <div class="search-title">検索条件</div>
      <div id="search-pos" class="mt-2 mb-2">
        現在地：
        <button class="btn btn-primary btn-sm" v-on:click="_getPos()">取得</button><br>
        <span v-html="position"></span>
      </div>
      <div id="search-area" class="mb-2">
        <label for="area-dropdown">検索範囲：</label>
        <div class="btn-group btn-group-sm" role="group" aria-label="area-list">
          <button v-for="radius in area_radius" type="button" v-on:click="_setArea(radius.id)" v-bind:class="['btn', area_id == radius.id ? 'btn-primary' : 'btn-secondary']">{{radius.name}}</button>
        </div>
      </div>
      <div style="text-align: center;">
        <button class="btn btn-success" onclick="getRestSearch()">検索！</button>
      </div>
    </div>
    <div id="results">
      <div v-if="hit_count">{{hit_count}}件見つかりました。</div>
      <div v-if="hit_count > 100">最初の100件のみ表示します。</div>
      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center" id="pagenav">
        </ul>
      </nav>
      <div v-for="rest in disp_list">
        <div class="media border p-2 rest-row" v-on:click="_showDetail(rest)">
          <img v-bind:src="rest.image_url.shop_image1" width=100 class="mr-2">
          <div class="media-body">
            <h5 class="mt-0">{{rest.name}}</h5>
            アクセス：
            <span v-if="rest.access.walk">
              {{rest.access.line}}{{rest.access.station}}{{rest.access.station_exit}}{{rest.access.walk}}分
            </span>
            <span v-else>情報なし</span>
          </div>
        </div>
      </div>
    </div>
    <div id="details" style="display: none;">
      <div class="d-flex justify-content-between">
        <button class="btn btn-primary" v-on:click="_returnToList()">一覧に戻る</button>
        <button class="btn btn-primary" v-on:click="_openGnavi()">ぐるなびで確認</button>
      </div>
      <br>
      <h2 style="text-align: center;">店舗詳細</h2>
      <div v-if="detail">
        <div style="text-align: center;">
          <img v-bind:src="detail.image_url.shop_image1" />
          <img v-bind:src="detail.image_url.shop_image2" />
        </div>
        <br>
        <table class="table">
          <tr>
            <td>店舗名</td>
            <td>{{detail.name}}</td>
          </tr>
          <tr>
            <td>住所</td>
            <td>{{detail.address}}</td>
          </tr>
          <tr>
            <td>電話番号</td>
            <td>{{detail.tel}}</td>
          </tr>
          <tr>
            <td>営業時間</td>
            <td>{{detail.opentime}}</td>
          </tr>
          <tr>
            <td>休業日</td>
            <td>{{detail.holiday}}</td>
          </tr>
          <!-- <tr>
                  <td>頒布イベント名</td>
                  <td><a href="/event/<%= @event.id %>"><%= @event.name %></a></td>
                </tr>
                <tr>
                  <td>発行日</td>
                  <td><%= @book.published_at %></td>
                </tr>
                <tr>
                  <td>詳細</td>
                  <td><%= @book.detail %></td>
                </tr>
                <tr>
                  <td>最終更新者</td>
                  <td><%= @user %></td>
                </tr> -->
        </table>
      </div>
    </div>
  </div>
  <br>
  <!-- 権利表記 -->
  <footer class="footer">
    <div class="text-center">
      Copyright &copy; 2019 Marron Akanishi All Rights Reserved.<br>
      Supported by <a href="https://api.gnavi.co.jp/api/scope/" target="_blank">ぐるなびWebService</a><br>
    </div>
  </footer>
  <script src="js/script.js"></script>
</body>
</html>